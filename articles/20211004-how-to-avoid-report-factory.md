---
title: "レポートファクトリーを避けるためのデータソース作成" # 記事のタイトル
emoji: "🏭" # アイキャッチとして使われる絵文字（1文字だけ）
type: "tech" # tech: 技術記事 / idea: アイデア記事
topics: ["BigQuery","Tableau"] # タグ。["markdown", "rust", "aws"]のように指定する
published: false # 公開設定（falseにすると下書き）
---

## レポートファクトリーを避けるためには、わかりやすいデータ構造にするべし
データがややこしいからファクトリー化してしまう。  
わかりやすいデータを作って展開しよう。
わかりやすいデータは「よく使う軸で」「よく使う数値が集計された」「最新のテーブル」だ。

## 課題
### レポートファクトリーとは
分析に必要なレポートを作れる人が限られており、要望に応えられない状態のこと。

参考
https://www.youtube.com/watch?v=8cDik60z-kw

https://kaodora.hatenablog.com/entry/2020/12/24/173154


## 解決策
### 着眼点
分析スキルのある人だけがレポートを作る状態になる。
スキルを身につけ、レポートを作成できる人が増えたら良い
現実はなかなかスキルが身につかない。
データのリレーションを理解して結合するのができないだけで、エクセルの作業はできる。
「ピボットテーブル」の形式で表せるものは各自でできる状態を目指す。
あらかじめ集計されたデータにする


### まとめ
サブクエリ内で unnest することで、データの重複を避けて ARRAY型のGA4イベントデータを抽出しました。
Google のサービスでは、 Cloud logging をはじめとして ARRAY 型でエクスポートされるデータは多いため、 unnest を使う際はぜひご一考ください。